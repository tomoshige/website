# 講義タイトル: 基本変形と行列式の計算

## 1. 講義概要
- **講義時間:** 60分　/　**演習時間:** 30分
- **目的:**  
  行列の基本変形（行基本変形）の復習を通じて、2次・3次行列における行列式の計算方法とその性質（多重線形性、交代性、積の性質、逆行列の存在条件との関係）を習得する。
- **今日の目標:**  
  ・基本変形（行の入れ替え、定数倍、行の加算）が行列式に与える影響を理解する。  
  ・2次・3次行列において、ランク落ち（線形従属）となった場合に行列式が0になる理由を考察する。  
  ・行列式と逆行列の存在条件の関係を、基本変形とランクの観点から明確にする。  
  ・具体例やGoogle Colabでの実演を通じ、理論と実践の橋渡しを行う。

## 2. 理論的背景と内容の説明
### 2.1 定義・基本概念
- **基本変形（行基本変形）とは:**  
  行列に対して以下の操作を行うことを指す。
  - **行の入れ替え:** 2つの行を交換する。  
    - 行列式は符号が反転する（$\det(A') = -\det(A)$）。
  - **行の定数倍:** ある行を非零の定数 $k$ 倍する。  
    - 行列式は $k$ 倍になる（$\det(A') = k \cdot \det(A)$）。
  - **行の加算:** ある行に他の行の $k$ 倍を加える。  
    - 行列式は変化しない（$\det(A') = \det(A)$）。
- **2次・3次行列に対する行列式:**  
  - **2次行列:**  
    $ A = \begin{pmatrix} a & b \\ c & d \end{pmatrix} $ の行列式は  
    $ \det(A) = ad - bc $。  
    幾何学的には、2つのベクトルが張る平行四辺形の面積（符号付き）に対応する。
  - **3次行列:**  
    $ B = \begin{pmatrix} a & b & c \\ d & e & f \\ g & h & i \end{pmatrix} $ の行列式は、余因子展開により  
    $ \det(B) = a(ei - fh) - b(di - fg) + c(dh - eg) $  
    と計算され、これは3次元空間における平行六面体の体積（符号付き）に対応する。

### 2.2 定理・命題
- **定理1: 基本変形と行列式の変化**  
  行基本変形を行うと、以下の性質が成り立つ。  
  - 行の交換 → 行列式の符号が反転する。  
  - 行の定数倍 → 行列式はその定数倍になる。  
  - ある行に他の行の定数倍を加えても → 行列式は変わらない。  
  これらの性質により、基本変形を利用して行列を簡約化した場合でも、元の行列式と比較して定数倍や符号反転の関係で容易に求めることができる。
- **定理2: ランク落ちと行列式**  
  行列の列（または行）が線形従属になると、すなわちランクが落ちる場合、  
  $ \det(A) = 0 $  
  となる。  
  これは、行列の各行（または列）が互いに独立でなければ、線形変換が縮退し、面積や体積がゼロになることを意味する。
- **定理3: 逆行列の存在条件と行列式**  
  正方行列 $ A $ が逆行列を持つ（正則である）ための必要十分条件は、  
  $ \det(A) \neq 0 $  
  である。  
  つまり、基本変形により行列が簡約化され、ランクが完全であれば、行列式はゼロでなく、逆行列が存在する。

### 2.3 数式・証明の詳細
- **2次行列の場合:**  
  $ A = \begin{pmatrix} a & b \\ c & d \end{pmatrix} $ に対して、  
  1. **行の交換:**  
     交換後の行列 $ A' = \begin{pmatrix} c & d \\ a & b \end{pmatrix} $ の行列式は  
     $ \det(A') = cb - da = -(ad - bc) $ となる。  
  2. **行の定数倍:**  
     例えば、1行目を $k$ 倍すると、  
     $ A' = \begin{pmatrix} ka & kb \\ c & d \end{pmatrix} $ で、  
     $ \det(A') = ka \cdot d - kb \cdot c = k(ad - bc) $ となる。  
  3. **行の加算:**  
     1行目に $k$ 倍の2行目を加えると、  
     $ A' = \begin{pmatrix} a + k c & b + k d \\ c & d \end{pmatrix} $ で、  
     $ \det(A') = (a+kc)d - (b+kd)c = ad - bc $ となり、変化しない。
- **3次行列の場合:**  
  $ B = \begin{pmatrix} a & b & c \\ d & e & f \\ g & h & i \end{pmatrix} $ に対して、余因子展開により、  
  $$
  \det(B) = a\begin{vmatrix} e & f \\ h & i \end{vmatrix} - b\begin{vmatrix} d & f \\ g & i \end{vmatrix} + c\begin{vmatrix} d & e \\ g & h \end{vmatrix}.
  $$
  基本変形は、各2×2部分行列にも同様の変化（符号反転、定数倍、変化なし）をもたらし、全体として多重線形性と交代性の性質が反映される。  
  また、行の一部が他の行の線形結合になる場合、行列全体のランクが落ちるため、余因子展開のすべての項が打ち消し合い、結果として $ \det(B) = 0 $ となる。

## 3. 扱う内容の実例（GPT, Colab等は使用せず）
- **実例1:**  
  2×2行列  
  $ A = \begin{pmatrix} 4 & 3 \\ 2 & 5 \end{pmatrix} $ の場合、  
  $ \det(A) = 4 \times 5 - 3 \times 2 = 20 - 6 = 14 $。  
  次に、1行目と2行目を交換した行列  
  $ A' = \begin{pmatrix} 2 & 5 \\ 4 & 3 \end{pmatrix} $ の行列式は  
  $ \det(A') = 2 \times 3 - 5 \times 4 = 6 - 20 = -14 $。  
  これにより、行の交換で符号が反転する性質を確認できる。
  
- **実例2:**  
  3×3行列  
  $ B = \begin{pmatrix} 1 & 2 & 3 \\ 0 & 4 & 5 \\ 1 & 0 & 6 \end{pmatrix} $ の場合、  
  余因子展開で計算すると  
  $ \det(B) = 1(4\cdot6 - 5\cdot0) - 2(0\cdot6 - 5\cdot1) + 3(0\cdot0 - 4\cdot1) = 24 + 10 - 12 = 22 $。  
  ここで、もし3行目が他の行の線形結合になれば、例えば  
  $ B' = \begin{pmatrix} 1 & 2 & 3 \\ 0 & 4 & 5 \\ 1 & 2 & 3 \end{pmatrix} $  
  となり、明らかに3行目が1行目と同じなので、  
  $ \det(B') = 0 $ となり、ランク落ちと行列式の値が0になる関係を確認できる。
  
- **実例3:**  
  Google Colab 上で、2次・3次行列に対して基本変形（行交換、定数倍、行加算）を行いながら、行列式の値がどのように変化するかを実演する例をホワイトボードで説明する。  
  これにより、行列式の多重線形性と交代性が具体的な数値例から視覚的に理解できる。

## 4. ChatGPTによる解説＋Colabでの実行例
- **ChatGPT解説:**  
  行列式は、行列の基本変形によりどのように変化するかが明確に定義されています。  
  たとえば、行の交換は行列式の符号を反転し、行の定数倍はその定数倍になり、行の加算は変化を与えません。  
  これらの性質は、行基本変形を用いたガウス消去法などで行列を簡約化する際に、元の行列式を求める上で非常に有用です。  
  また、ランク落ち（線形従属）した行列は行列式が0になるため、逆行列の存在条件とも直結します。  
  以下のColab実行例では、NumPyを用いて2次・3次行列の行列式を計算し、基本変形前後の変化を実際に確認します。

- **Colab実行例:** 以下に、PythonのNumPyを使ったサンプルコードを示します。
  ```python
  import numpy as np

  # 2次の行列の例
  A = np.array([[4, 3],
                [2, 5]])
  det_A = np.linalg.det(A)
  print("元の2次行列 A の行列式:", det_A)

  # 1行目と2行目を交換（符号反転）
  A_swapped = np.array([[2, 5],
                        [4, 3]])
  det_A_swapped = np.linalg.det(A_swapped)
  print("行の交換後の行列 A_swapped の行列式:", det_A_swapped)

  # 3次の行列の例
  B = np.array([[1, 2, 3],
                [0, 4, 5],
                [1, 0, 6]])
  det_B = np.linalg.det(B)
  print("元の3次行列 B の行列式:", det_B)

  # 3次行列で、3行目を1行目と同じにする（ランク落ち）
  B_rank_def = np.array([[1, 2, 3],
                         [0, 4, 5],
                         [1, 2, 3]])
  det_B_rank_def = np.linalg.det(B_rank_def)
  print("ランク落ち行列 B_rank_def の行列式:", det_B_rank_def)
  ```
  このコードは、基本変形が行列式に与える影響や、ランク落ち行列の行列式が0になることを数値的に確認できます。

## 5. 学んだ内容の応用例（optional)
- **応用分野:**  
  - **コンピュータグラフィックス:** 変換行列の行列式は、オブジェクトのスケーリングや体積の保存性を評価する際に利用されます。  
  - **機械学習・統計解析:** モデルのデザイン行列の行列式は、多重共線性の評価や逆行列の計算の安定性に関わる。  
  - **工学:** 線形システムの安定性解析において、行列式の符号や絶対値がシステムの特性を示します。
- **具体例:**  
  例えば、3次元空間での線形変換がどのように体積を変化させるかを行列式で評価し、設計された変換が体積保存かどうかを検証することができます。

## 6. 演習問題
- **問題1:**  
  行基本変形の各操作（行の交換、行の定数倍、行の加算）が行列式にどのような影響を与えるか、定義を用いて説明せよ。  
  *【ヒント】* それぞれの操作後の行列式の変化（符号反転、定数倍、変化なし）に注目すること。

- **問題2:**  
  次の2×2行列  
  $$
  A = \begin{pmatrix} 3 & 5 \\ 2 & 7 \end{pmatrix}
  $$
  の行列式を手計算で求め、その後、1行目を2倍した行列の行列式を計算せよ。  
  *【ヒント】* 行の定数倍による変化を確認する。

- **問題3:**  
  次の3×3行列  
  $$
  B = \begin{pmatrix} 1 & 2 & 3 \\ 0 & 4 & 5 \\ 1 & 0 & 6 \end{pmatrix}
  $$
  について、余因子展開を用いて行列式を求め、3行目を1行目と同じに置き換えた場合の行列式が0になることを示せ。  
  *【ヒント】* ランク落ちの概念に注目すること。

- **問題4 (実践):**  
  Google Colab を用いて、2次・3次行列に対する基本変形（行の交換、行の定数倍、行の加算）を実施し、その都度行列式の変化を記録せよ。  
  その結果をレポートとしてまとめ、行列式の性質について論じよ。  
  *【ヒント】* NumPy の `np.linalg.det` 関数を用いること。

## 7. 付録・参考資料
- **参考文献:**  
  - 『線形代数学入門』、『現代線形代数学』、その他行列式に関する参考書  
  - ウェブリンク: Khan Academy, MIT OpenCourseWare, Coursera など
- **補足資料:**  
  - 詳細な解説スライド  
  - 追加例題とその解答例  
  - FAQ: 行基本変形、余因子展開、行列式の幾何学的解釈に関する質問